%---------------------------------------------------------------------------%
%->> Frontmatter
%---------------------------------------------------------------------------%
%-
%-> 生成封面
%-
\maketitle% 生成中文封面
\MAKETITLE% 生成英文封面
%-
%-> 作者声明
%-
\makedeclaration% 生成声明页
%-
%-> 中文摘要
%-
\intobmk\chapter*{摘\quad 要}% 显示在书签但不显示在目录
\setcounter{page}{1}% 开始页码
\pagenumbering{Roman}% 页码符号
近年来，多款国产处理器设计能力迅速接近国际先进水平，
但采用不同指令集。
这带来了软件适配和生态迁移的困难，造成了生态碎片化的问题，阻碍了国产处理器的发展。
二进制翻译技术，能缓解上述问题，
但目前高性能二进制翻译器性能只能达到原生性能的80\%，
且软件优化方案已经比较成熟，难以进一步提升性能，亟需软硬件协同的优化。

针对生态碎片化和二进制翻译器性能瓶颈的问题，
本文在一个软硬协同的二进制翻译系统——x86微译器中，添加了RISC-V架构的支持。
该技术的核心目标是在单一硬件平台下实现多指令集的共存，同时实现接近原生的运行效率。

本文的主要工作及贡献如下：

1. 设计并实现了RISC-V微译器：
设计了寄存器映射方案，累计添加了51条微码指令用于支持272条通用RISC-V指令。

2. 优化了RISC-V微译器的性能：添加了4种优化方案，包括放松缓存行结尾、放松条件跳转指令、添加融合指令压缩编码、支持变长缓存行，
测试显示优化方案降低了微码缓存的缺失率，提升了微译器的性能。

本文在Gem5模拟器中实现了RISC-V微译器原型系统，
实验显示优化后的RISC-V微译器在运行SPEC 2000测试的平均性能达到了原生程序的96.1\%，
有效缓解了性能瓶颈，实现了接近原生程序的运行效率。微译器同时支持x86和RISC-V两种指令集，
为多架构二进制翻译提供了一种新的解决方案。

\keywords{二进制翻译，多架构，软硬协同}% 中文关键词
%-
%-> 英文摘要
%-
\intobmk\chapter*{Abstract}% 显示在书签但不显示在目录

In recent years, the capabilities of various domestically-produced processors have rapidly approached international advanced levels, but they often utilize different instruction sets. This diversity has created difficulties in software adaptation and ecosystem migration, leading to ecosystem fragmentation which impedes the development of these domestic processors. Binary translation technology offers a means to mitigate these challenges, although the performance of high-performance binary translators currently only achieves up to 80\% of native performance, and with software optimization strategies already mature, further performance enhancements are challenging without hardware-software co-optimization.

This thesis addresses ecosystem fragmentation and the performance bottleneck of binary translators by integrating support for the RISC-V architecture into a co-designed binary translator technology—x86 MicroTranslator. The core goal of this technology is to enable the coexistence of multiple instruction sets on a single hardware platform while achieving near-native execution efficiency.

The main work and contributions of this thesis are as follows:

1. Design of the RISC-V MicroTranslator:
A register mapping scheme was designed, and 51 microcode instructions were added to support the translation of 272 RISC-V instructions.
Performance Optimization of MicroTranslator:

2. Four optimization strategies were implemented, including the relaxation of cache line endings, conditional jump instructions, support for compressed instructions, and support for variable-length microcode lines. Tests showed that these optimizations reduced the miss rate of the microcode cache and enhanced the performance of MicroTranslator.

3. A prototype system was implemented in the Gem5 simulator. Experimental results demonstrate that the optimized RISC-V MicroTranslator achieves an average performance of 96.1\% of native programs when running the SPEC 2000 benchmarks, effectively alleviating the performance bottleneck and achieving near-native execution efficiency. By supporting both x86 and RISC-V instruction sets, MicroTranslator provides a novel solution for multi-architecture binary translation.

\KEYWORDS{Binary translation, multi-architecture, software and hardware collaboration}% 英文关键词

\pagestyle{enfrontmatterstyle}%
\cleardoublepage\pagestyle{frontmatterstyle}%

%---------------------------------------------------------------------------%
