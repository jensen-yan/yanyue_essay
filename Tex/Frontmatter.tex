%---------------------------------------------------------------------------%
%->> Frontmatter
%---------------------------------------------------------------------------%
%-
%-> 生成封面
%-
\maketitle% 生成中文封面
\MAKETITLE% 生成英文封面
%-
%-> 作者声明
%-
\makedeclaration% 生成声明页
%-
%-> 中文摘要
%-
\intobmk\chapter*{摘\quad 要}% 显示在书签但不显示在目录
\setcounter{page}{1}% 开始页码
\pagenumbering{Roman}% 页码符号

% 近年来国产处理器的发展日益迅猛，处理器设计能力已经接近国际先进水平，
% 但是由于不同指令集的处理器之间生态互不兼容，
% 新兴指令集处理器生态难以融入主流的x86和ARM生态，这阻碍了国产处理器的发展。
% 二进制翻译器是实现指令集兼容性的主要方法，有助于新兴指令集生态建设，
% 但是现有的主流二进制翻译器性能达到80\%的原生性能，仍然存在性能瓶颈，

近年来，多款国产处理器设计能力迅速接近国际先进水平，
但采用不同指令集。
这带来了软件适配和生态融合的困难，造成了生态碎片化的问题，阻碍了国产处理器的发展。
二进制翻译技术，能缓解上述问题，
但目前高性能二进制翻译器性能只能达到原生性能的80\%，
且软件优化方案已经比较成熟，难以进一步提升性能，亟需软硬件协同的优化。

针对生态碎片化和二进制翻译器性能瓶颈的问题，
本文合作提出了一种多架构软硬协同的二进制翻译技术——微译器。
该技术的核心目标是在单一硬件平台下实现多指令集的共存，同时实现接近原生的运行效率。
当前微译器已支持x86指令集，本文在此基础上添加了RISC-V架构的支持，
验证了其高效支持多架构的能力。

本文的主要工作及贡献如下：

1. 合作提出并设计了微译器：
通过硬件层的翻译缓存与软件层的二进制翻译器相结合，
消除了软件翻译中的间接跳转开销，缩小了指令集语义差异，提升了翻译性能。

2. 扩展了微译器以支持RISC-V架构：
累计添加了51条微码指令用于支持272条RISC-V指令翻译，并设计了寄存器映射方案。

3. 优化微译器的性能：添加了4种优化方案，包括放松缓存行结尾、放松条件跳转指令、支持压缩指令、支持变长微码行。
测试显示优化方案降低了微码缓存的缺失率，提升了微译器的性能。

本文在Gem5模拟器中实现了RISC-V微译器的原型系统，
实验结果显示优化后的微译器在运行SPEC 2000测试的平均性能达到了原生程序的96.1\%，
有效缓解了性能瓶颈，实现了接近原生程序的运行效率。微译器同时支持x86和RISC-V两种指令集，
为多架构二进制翻译提供了一种新的解决方案。

\keywords{二进制翻译，多架构，软硬协同}% 中文关键词
%-
%-> 英文摘要
%-
\intobmk\chapter*{Abstract}% 显示在书签但不显示在目录

This article adds RISC-V multi-architecture support to the existing new binary translation technology - micro-translator, aiming to solve the problem of instruction set fragmentation and performance bottlenecks between multi-architectures, and verify the micro-translator's ability to support multiple architectures. feasibility of support.
The microtranslator combines the concepts of traditional microcode caching and binary translation, and achieves the coexistence of multiple instruction sets by introducing translation caching and fused microcode at the hardware level, and using static and dynamic binary translators at the software level.
At the same time, this article continues to optimize the coding design of the integrated microcode and the boundary condition design of the translation cache to improve the performance of the microtranslator.
The micro-translator verifies its effectiveness in supporting x86 and RISC-V multi-architecture in the Gem5 simulator by running SPEC CPU 2017, SPEC CPU 2000 and CoreMark programs.
Experimental results show that the performance and effect of the micro-translator have been significantly improved, reaching more than 90\% of the running performance of native programs.
Compared with the performance of the multi-architecture translator QEMU 20\%, the performance is improved several times, which provides an innovative solution to solve the problem of software and hardware collaboration in a multi-architecture environment.


\KEYWORDS{Binary translation, multi-architecture, software and hardware collaboration}% 英文关键词
%---------------------------------------------------------------------------%
